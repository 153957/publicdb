{% extends "base.html" %}

{% block title %}HiSPARC | Station layout review form{% endblock %}

{% block content %}

    <div id="header">
        <h2>HiSPARC station layout review form</h2>
    </div>

    <p>
        This is the submitted station layout for station {{ layout.station }}.<br>
        This layout became active on {{ layout.active_date }}.<br>
        These measurements where submitted by {{ layout.name }}.<br>
        The submitter can be reached via: {{ layout.email }}.<br>
        Please review the layout and either approve or dismiss it.
    </p>

    <table>
        <thead>
            <tr>
                <th>
                <th colspan='2'>Master
                <th colspan='2'>Slave
            <tr>
                <th>
                <th style="color: black;">1
                <th style="color: red;">2
                <th style="color: green;">3
                <th style="color: blue;">4
        <tbody>
            <tr>
                <td title="radius: distance to detector from GPS, in plane of GPS">r [m]
                <td>{{ layout.detector_1_radius }}
                <td>{{ layout.detector_2_radius }}
                <td>{{ layout.detector_3_radius }}
                <td>{{ layout.detector_4_radius }}
            <tr>
                <td title="alpha: angle between detector and true north as seen from GPS">α [°]
                <td>{{ layout.detector_1_alpha }}
                <td>{{ layout.detector_2_alpha }}
                <td>{{ layout.detector_3_alpha }}
                <td>{{ layout.detector_4_alpha }}
            <tr>
                <td title="beta: angle of the long side of the scintillator to true north">β [°]
                <td>{{ layout.detector_1_beta }}
                <td>{{ layout.detector_2_beta }}
                <td>{{ layout.detector_3_beta }}
                <td>{{ layout.detector_4_beta }}
            <tr>
                <td title="height: altitude of the detector above plane of GPS">z [m]
                <td>{{ layout.detector_1_height }}
                <td>{{ layout.detector_2_height }}
                <td>{{ layout.detector_3_height }}
                <td>{{ layout.detector_4_height }}
    </table>

    {% include "layout_canvas.html" %}

    <form action="{% url 'django_publicdb.station_layout.views.validate_review_layout' hash %}" method="post">
    {% csrf_token %}
        {{ form.as_p }}
        <input type="submit" value="Submit" />
    </form>

{% endblock %}

{% block script %}
    var radius = [{{ layout.detector_1_radius }},
                  {{ layout.detector_2_radius }},
                  {{ layout.detector_3_radius }},
                  {{ layout.detector_4_radius }}]
    var alpha = [{{ layout.detector_1_alpha }},
                 {{ layout.detector_2_alpha }},
                 {{ layout.detector_3_alpha }},
                 {{ layout.detector_4_alpha }}]
    var beta = [{{ layout.detector_1_beta }},
                {{ layout.detector_2_beta }},
                {{ layout.detector_3_beta }},
                {{ layout.detector_4_beta }}]
    draw_station(context, radius, alpha, beta);
{% endblock %}
