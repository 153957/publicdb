#
# Nagios configuration file for the HiSPARC experiment
#
#
# This file was automatically generated by the HiSPARC administration site
# software.
#

{% for cluster in clusters %}
define hostgroup {
    hostgroup_name      {{ cluster.name|slugify }}
    alias               {{ cluster.name }}
}
{% endfor %}

define contact {
    use                 generic-contact
    contact_name        none
    alias               No listed contact person
    email               admhispa@nikhef.nl
}

{% for contact in contacts %}
define contact {
    use                 generic-contact
    contact_name        {{ contact|slugify }}
    alias               {{ contact }}
    email               {{ contact.email }}
}
{% endfor %}

{% for host in hosts %}
define host {
    use                 generic-host
    host_name           {{ host.pc.name|slugify }}
    address             {{ host.pc.ip }}
    alias               {{ host.pc.name }}
    hostgroups          {{ host.pc.station.cluster|slugify }}
    contacts            {{ host.pc.station.contact|slugify }}
    check_command	check-host-alive
    max_check_attempts  5
    notification_interval	1440		# Notify daily
}
{% for service in host.services %}
define service {
    use                 generic-service
    host_name           {{ host.pc.name|slugify }}
    service_description {{ service.description }}
    check_command       {{ service.check_command|safe }}
{% if not service.active_checks %}
    active_checks_enabled	0
    check_freshness		1		# Check if data turns stale
    freshness_threshold		1800		# 30 minutes
{% endif %}
    notification_interval	1440		# Notify daily
}
{% endfor %}
{% endfor %}
